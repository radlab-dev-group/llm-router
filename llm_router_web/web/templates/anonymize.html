{% extends "base_anonymizer.html" %}
{% block content %}
<div class="card">
    <h2>ðŸ”’ Anonimizacja tekstu</h2>

    <form id="anonymize-form"
          hx-post="{{ url_for('anonymize_web.process_text') }}"
          hx-target="#result-container"
          hx-swap="innerHTML"
          hx-trigger="submit"
          hx-indicator="#loading-spinner"
          class="form">

        <label for="input-text">Wklej tekst do anonimizacji:</label>
        <textarea id="input-text" name="text" rows="6"
                  placeholder="Wpisz lub wklej tekstâ€¦" required
                  class="w100"></textarea>

        <div class="form-actions">
            <button type="submit" class="btn primary">ðŸš€ Anonimizuj</button>
            <span id="loading-spinner" class="spinner hidden"></span>
        </div>
    </form>
</div>

<!-- 1ï¸âƒ£  StaÅ‚y panel z wynikiem (pierwotny placeholder) -->
<div id="result-container" class="card" style="margin-top: 1rem;">
    <h3>âœ… Zanonimizowany tekst</h3>
    <p class="muted">Wynik pojawi siÄ™ po anonimizacji.</p>
</div>

<script>
    // Prosty spinner
    document.body.addEventListener('htmx:request', () => {
        document.getElementById('loading-spinner').classList.remove('hidden');
    });
    document.body.addEventListener('htmx:afterRequest', () => {
        document.getElementById('loading-spinner').classList.add('hidden');
    });
</script>

{% endblock %}