{% extends "base.html" %}
{% block content %}
<h2>List of defined configs</h2>
<div class="actions">
    <a class="btn" href="{{ url_for('new_config') }}">New config (from scratch))</a>
    <a class="btn" href="{{ url_for('import_config') }}">Load existing config</a>
    <a class="btn" href="{{ url_for('list_configs') }}">Show defined configs</a>
</div>

<table class="table">
    <thead>
    <tr>
        <th>Config name</th>
        <th>Preview</th>
        <th>Edit</th>
        <th>Export</th>
        <th>Set as default</th>
        <th>Is default</th>
    </tr>
    </thead>
    <tbody>
    {% for c in configs %}
    <tr>
        <td>{{ c.name }}</td>
        <td><a class="btn btn-small" href="{{ url_for('view_config', config_id=c.id) }}">Preview</a></td>
        <td><a class="btn btn-small" href="{{ url_for('edit_config', config_id=c.id) }}">Edit</a></td>
        <td><a class="btn btn-small" href="{{ url_for('export_config', config_id=c.id) }}">Export</a></td>
        <td>
            <button class="btn btn-small"
                    hx-post="{{ url_for('set_active_config', config_id=c.id) }}"
                    hx-swap="none"
                    hx-on="htmx:afterRequest: window.location.reload()">
                Set as default
            </button>
        </td>
        <td class="nowrap">
            {% if c.is_active %}<span class="badge">DEFAULT</span>{% else %}-{% endif %}
        </td>
    </tr>
    {% else %}
    <tr>
        <td colspan="6">No configuration found.</td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}